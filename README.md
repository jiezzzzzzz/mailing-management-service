# Сервис для рассылки сообщений 

Сервис без графического интерфейса. 

Позволяет рассылать сообщения списку клиентов по заданным параметрам.

Используется API [внешнего сайта](https://probe.fbrq.cloud/docs).

---

## Сущности 

### Сущность "рассылка" имеет атрибуты:

•уникальный id рассылки

•дата и время запуска рассылки

•текст сообщения для доставки клиенту

•фильтр свойств клиентов, на которых должна быть произведена рассылка (код мобильного оператора, тег)

•дата и время окончания рассылки: если по каким-то причинам не успели разослать все сообщения - никакие сообщения клиентам после этого времени доставляться не должны

### Сущность "клиент" имеет атрибуты:

•уникальный id клиента

•номер телефона клиента в формате 7XXXXXXXXXX (X - цифра от 0 до 9)

•код мобильного оператора

•тег (произвольная метка)

•часовой пояс

### Сущность "сообщение" имеет атрибуты:

•уникальный id сообщения

•дата и время создания (отправки)

•статус отправки

•id рассылки, в рамках которой было отправлено сообщение

•id клиента, которому отправили

---

## Инструкция по запуску: 

1. Копировать файлы себе в репозиторий

2. Развернуть внутри проекта виртуальную среду командой:

<code>python -m venv <название виртуального окружения></code>

3. Установить все библиотеки:

<code>pip install -r requirements.txt</code>

4. Создать файл .env для хранения переменных окружения: 

<code>touch .env</code>

5. Создать секретный ключ джанго в интерактивном режиме python:

```
python
import django
from django.core.management.utils import get_random_secret_key
print(get_random_secret_key())
```

Скопировать стркоу в .env файл: <code>DJANGO_KEY='ваш ключ'</code>
Добавить токен внешнего сервиса: <code>TOKEN_SENDER='ваш токен'</code>

6. Выполнить миграции:

<code>python manage.py migrate</code>

---

## Инструкция по использованию:

1. Создать суперпользователя:

<code>python manage.py createsuperuser</code>

2. Запустить сервер: 

<code>python manage.py runserver</code>

3. Перейти в панель администратора 

4. Занести данные получателей рассылки 

5. Запустить сервис: 

<code>python manage.py service</code>
